buildscript {
  repositories {
    jcenter()
  }
  dependencies {
    classpath "org.gradle.api.plugins:gradle-nexus-plugin:0.7.1"
  }
}

apply plugin: "groovy"
apply plugin: "nexus"

group = "co.freeside"
version = "2.0"
archivesBaseName = "compass-gradle-plugin"

repositories {
  jcenter()
  maven { url "https://oss.sonatype.org/content/repositories/releases/" }
  maven { url "https://oss.sonatype.org/content/repositories/snapshots" }
}

dependencies {
  compile gradleApi()
  compile "org.codehaus.groovy:groovy:2.3.7"
  compile "com.github.jruby-gradle:jruby-gradle-plugin:0.1.3"

  testCompile("org.spockframework:spock-core:1.0-groovy-2.3-SNAPSHOT") {
    exclude group: "org.codehaus.groovy"
  }
  testCompile "net.sourceforge.cssparser:cssparser:0.9.14"
}

task sourceJar(type: Jar) {
  from sourceSets.main.allGroovy, sourceSets.main.resources
}

apply from: "gradle/integration-test.gradle"

install {
  repositories {
    mavenDeployer {
      repository(url: "file://${buildDir.absolutePath}/localRepo")
    }
  }
}